# 智能体聚合平台

这是一个基于Web的智能体聚合平台，让用户可以方便地配置和使用多种AI大模型。本项目支持流式响应、Markdown渲染、代码高亮、暗色模式等功能，并且具有良好的移动设备兼容性。

## 功能特点

- 多智能体支持：可以添加、编辑和删除多个智能体配置
- 流式响应：实时显示AI回复，支持打字机效果
- Markdown渲染：支持AI回复中的Markdown格式
- 代码高亮：自动为代码块添加语法高亮
- 聊天历史：保存与各智能体的聊天记录
- 响应式设计：同时支持桌面和移动设备
- 离线存储：使用本地存储保存设置和聊天记录
- 导出功能：可将AI回复导出为Word文档
- 暗色模式：提供舒适的暗色界面
- PWA支持：可作为渐进式Web应用安装

## 项目结构

项目采用模块化结构，将原来的单一JavaScript文件拆分为多个功能模块：

```
├── index.html          # 主页面
├── style.css           # 样式表
├── storage.js          # 存储系统模块
├── agents.js           # 智能体管理模块
├── chat.js             # 聊天功能模块
├── api.js              # API调用模块
├── word-export.js      # Word导出模块
├── settings.js         # 设置模块
├── ui.js               # UI界面交互模块
├── app.js              # 主应用模块
├── manifest.json       # PWA配置
└── service-worker.js   # 服务工作线程
```

### 模块说明

1. **storage.js**：负责数据持久化
   - 提供本地存储的读写接口
   - 自动处理存储错误和备份

2. **agents.js**：管理智能体配置
   - 加载、保存和管理智能体列表
   - 处理智能体的添加、编辑和删除

3. **chat.js**：聊天功能
   - 显示聊天消息和历史记录
   - 处理用户消息和AI回复的显示

4. **api.js**：API通信
   - 与AI服务提供商的API进行通信
   - 处理流式响应和错误情况

5. **word-export.js**：导出功能
   - 将AI回复转换为Word文档
   - 处理Markdown格式转换

6. **settings.js**：用户设置
   - 管理用户界面和功能偏好
   - 提供设置的保存和应用

7. **ui.js**：用户界面
   - 处理UI元素的交互和事件
   - 管理移动设备响应式行为

8. **app.js**：主应用
   - 协调各模块的初始化和交互
   - 管理应用生命周期

## 如何使用

1. 打开应用后，使用右上角的设置按钮配置界面偏好
2. 从下拉菜单选择一个智能体，或者通过左侧菜单添加新的智能体
3. 在添加智能体时，填写相应的API信息（如API地址、密钥等）
4. 在文本框中输入消息并发送，即可与选定的智能体进行对话
5. 使用右上角的清除按钮可以清除当前聊天记录

## 添加自定义智能体

添加自定义智能体时，需要提供以下信息：

- **智能体名称**：显示在界面上的名称
- **API地址**：AI服务的API端点，例如OpenAI的`https://api.openai.com/v1/chat/completions`
- **API密钥**：访问API所需的密钥
- **模型名称**：要使用的模型，例如`gpt-4`或`gemini-2.0-flash`
- **系统提示词**：可选的系统角色设定
- **Temperature**：生成文本的随机性（0-2）
- **最大Token数**：生成文本的最大长度
- **欢迎消息**：当选择智能体时显示的初始消息

## 浏览器兼容性

本应用支持所有现代浏览器，包括：
- Chrome (推荐)
- Firefox
- Edge
- Safari

移动设备上也能良好运行，支持iOS和Android系统。

## 离线使用

应用支持PWA (Progressive Web App) 功能，可以安装到设备上离线使用。智能体配置和聊天记录将保存在本地存储中。

## 开发者信息

如果需要进一步开发或自定义，可以编辑各个模块文件。模块之间通过全局window对象进行通信，每个模块都会导出必要的函数和变量。

基于浏览器的模块化实现，确保按正确顺序加载脚本：
1. 先加载基础模块（storage.js）
2. 再加载依赖它的模块
3. 最后加载主应用模块（app.js）
