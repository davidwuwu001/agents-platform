# 智能体聚合平台 - 汤仔高效智能助手

这是一个功能强大的智能体聚合平台，可以连接多种顶尖AI大模型，帮助用户获取信息、解答问题、激发灵感，提高工作效率。

## ✨ 功能特性

* **多模型支持**：支持连接多种AI大模型，可以根据需要切换不同的AI服务
* **自定义智能体**：可以添加、编辑和删除不同的智能体配置
* **Markdown 渲染**：AI的回复支持Markdown格式，包括标题、列表、粗体、斜体等，使内容更易读
* **代码高亮**：自动对代码块进行语法高亮，方便阅读和使用
* **导出Word文档**：一键将AI回复的内容导出为Word文档，自动保留标题、列表、粗体等格式
* **流式响应**：支持打字机效果的流式响应，提供更好的交互体验
* **对话历史持久化**：切换智能体或刷新页面时自动保存聊天记录，确保对话内容不丢失
* **清除对话功能**：一键清除当前对话历史，便于开始新的对话
* **灵活配置**：
  * **API 密钥设置**：轻松配置不同AI服务的API密钥
  * **模型选择**：支持选择各种AI模型
  * **温度设置**：可以调整AI回复的创造性和随机性
  * **系统提示词**：自定义AI的行为和角色
  * **欢迎消息**：为每个智能体定制简短的欢迎消息（30字以内）
* **设置面板**：通过设置面板自定义显示选项，比如Markdown渲染和代码高亮
* **管理员模式**：便捷的智能体管理界面
* **复制功能**：一键复制AI回复内容，支持保留Markdown格式
* **简洁界面**：清爽的用户界面，专注于对话体验
* **紫色主题**：采用现代化的紫色主题，提供舒适的视觉体验
* **本地运行**：提供多种启动方式，无需复杂部署
* **多重存储保护**：支持智能体配置和对话历史的多层次备份机制，防止数据丢失
* **移动设备优化**：自动检测移动设备并启用特殊的存储保护模式，确保移动端配置持久性
* **离线恢复能力**：即使在网络不佳或存储受限的环境下也能恢复配置
* **Python图形化配置工具**：提供可视化界面编辑智能体配置，无需手动修改代码

## 🚀 如何开始

### 启动平台

有多种方式可以启动平台：

1. **使用启动脚本（推荐）**：
   * Windows系统：双击`start.bat`文件
   * Mac/Linux系统：在终端中运行`./start.sh`（可能需要先运行`chmod +x start.sh`赋予执行权限）

2. **手动启动**：
   * 打开终端，进入项目目录
   * 运行`python -m http.server 8000`

3. **通过启动页面**：
   * 打开`start.html`，按照页面指引操作

启动后，在浏览器中访问 [http://localhost:8000](http://localhost:8000) 即可使用平台。

### 首次配置

1. 在页面右上角勾选"管理员模式"
2. 在页面底部管理面板中点击"添加新智能体"按钮
3. 填写智能体信息，包括：
   * 智能体名称
   * API地址
   * API密钥
   * 模型名称
   * 系统提示词
   * 温度参数
   * 最大Tokens
   * 欢迎消息（30字以内）
4. 点击"保存"按钮完成添加
5. 从下拉菜单中选择刚添加的智能体
6. 现在可以开始对话了！

### 使用Python图形化配置工具

如果您不想通过网页界面管理智能体，可以使用我们提供的Python图形化工具：

1. 确保已安装Python 3.6+
2. 在项目目录下运行：`python agent_editor.py`
3. 通过图形界面添加、编辑、删除或复制智能体
4. 完成后点击"保存所有到agents.json"保存配置
5. 刷新网页即可看到更新后的智能体列表

工具还提供了全面的备份和恢复功能：

* **自动备份**：每次保存到agents.json时，系统会自动创建带时间戳的备份
* **手动备份**：点击"创建备份"按钮可随时手动创建备份
* **恢复备份**：点击"恢复备份"可从之前的备份中恢复配置
* **管理备份**：点击"管理备份"可查看、删除备份文件
* **智能清理**：系统自动保留最近30个备份，并清理旧备份以节省空间

## 🚀 部署到服务器

如果你想将此项目部署到Web服务器，可以按照以下步骤操作：

### 方法一：使用传统Web服务器（Apache/Nginx）

1. 将所有文件上传到你的Web服务器目录
2. 确保服务器配置为提供静态文件服务
3. 访问相应的URL即可使用

例如，使用Nginx的配置：

```nginx
server {
    listen 80;
    server_name your-domain.com;
    root /path/to/wuren-ai-platform;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
```

### 方法二：使用GitHub Pages（免费托管）

1. Fork这个仓库到你的GitHub账号
2. 在仓库设置中启用GitHub Pages（Settings > Pages）
3. 选择main分支作为源
4. 稍等片刻，你的网站就会在`https://username.github.io/wuren-ai-platform/`上线

### 方法三：使用Node.js提供服务

如果你已经安装了Node.js，可以使用http-server包：

```bash
# 安装http-server
npm install -g http-server

# 进入项目目录
cd wuren-ai-platform

# 启动服务
http-server -p 8080
```

然后访问 http://localhost:8080

### 注意事项

1. **API密钥安全**：项目中的API密钥存储在浏览器本地存储中。如果部署为公开服务，请注意API密钥的安全性。
2. **CORS策略**：如果你使用的API服务有CORS限制，可能需要配置代理服务器。
3. **本地文件依赖**：项目使用了本地文件`docx.js`和`FileSaver.min.js`，请确保这些文件正确上传。
4. **浏览器兼容性**：建议使用现代浏览器（Chrome、Edge、Firefox、Safari）访问。

## 📁 文件说明

* `index.html`：网页的主要结构和内容布局
* `style.css`：控制网页的外观和样式（颜色、字体、布局等）
* `script-new.js`：网页的核心交互逻辑，包括与AI服务的通信、消息处理等
* `faq.html`：常见问题解答页面
* `start.html`：启动引导页面
* `start.sh`：Mac/Linux系统的启动脚本
* `start.bat`：Windows系统的启动脚本
* `agents.json`：智能体配置文件（可选，也可通过界面配置）
* `agent_editor.py`：Python图形化智能体配置工具
* `tangzai.jpg`：平台Logo图片

## ⚠️ 注意事项

* **API 密钥安全**：您的API密钥非常重要，请妥善保管，不要分享给他人或提交到公共代码仓库。平台将密钥存储在浏览器的本地存储中。
* **网络连接**：与AI对话需要稳定的网络连接。如果网络中断，将无法获取AI的回复。
* **浏览器兼容性**：建议使用最新版本的现代浏览器（Chrome、Edge、Firefox、Safari）以获得最佳体验。
* **CORS策略**：必须通过HTTP服务器访问平台，不能直接打开HTML文件，否则会因浏览器的跨域安全策略导致无法加载配置和访问API。
* **清空浏览器缓存**：如果更新代码后显示异常，可以尝试强制刷新（通常是Ctrl+F5或Cmd+Shift+R）或清空浏览器缓存。
* **移动设备存储**：在移动设备上，系统会自动检测并启用增强的存储保护。如果您在移动设备上使用，将看到相应提示。

## 💡 常见问题解答

如遇到问题，请查看平台内的"常见问题"页面，包含了关于以下方面的详细解答：

* 如何启动平台
* 如何添加新的智能体
* API调用失败的原因
* 系统提示词的使用
* 温度参数的影响
* 对话历史的保存方式
* 流式响应的使用
* 智能体配置的存储方式
* 如何获取API密钥
* Markdown渲染的功能
* 如何复制AI回复内容
* 如何导出Word文档
  * 每条AI回复后都有"导出Word"按钮，点击即可下载
  * 导出的Word文档会自动保留标题层级、粗体、斜体和代码块等格式
  * 文件名默认包含日期和时间信息，方便归档管理
* 常见故障排除方法

### 移动设备使用提示

在移动设备（手机、平板）上使用本平台时：

* 系统会自动识别并启用"移动设备增强存储模式"，提供以下额外功能：
  * 多重存储备份：同时使用localStorage、sessionStorage和内存存储
  * 自动恢复机制：如果主存储失效，系统会自动从备份恢复
  * 定期自动保存：每30秒自动保存一次当前配置
  * 每日备份：创建带时间戳的备份，增加数据安全性
  * 动态恢复：启动时自动尝试从多个位置恢复数据

* 如果您发现刷新后智能体配置仍然丢失，尝试以下方法：
  * 确认浏览器未开启"无痕模式"（这种模式下存储被限制）
  * 检查浏览器设置中"网站数据存储"权限是否已开启
  * 使用Python图形化工具编辑agents.json文件，而不是依赖浏览器存储
  * 对于iOS设备，确保没有开启"阻止所有cookies"设置
  * 尝试使用不同的浏览器（如Chrome、Safari、Firefox）

* 存储故障排查：
  * 如果看到"存储保护模式已启用"的提示，表明系统检测到可能的存储问题
  * 如果浏览器报告"存储配额已满"，可以清理其他网站的缓存腾出空间
  * 某些移动浏览器有默认7天的数据过期时间，请定期备份重要配置

## 💾 新增功能：独立Markdown转Word导出工具

为了使Markdown转Word的功能更加灵活，我们提供了一个独立的导出工具，您可以在不修改原有代码的情况下使用它：

### 包含的文件

* `markdown-to-word.js` - 独立的导出工具库
* `markdown-to-word-demo.html` - 演示页面
* `markdown-to-word-readme.md` - 详细使用说明

### 主要特性

* 独立运行，不影响原有代码
* 完整支持Markdown语法（标题、列表、代码块、粗体、斜体等）
* 生成格式精美的Word文档(.docx)
* 提供简单的API，易于集成到任何项目

### 快速使用

1. 在HTML中引入必要文件：
```html
<script src="docx.js"></script>
<script src="FileSaver.min.js"></script>
<script src="markdown-to-word.js"></script>
```

2. 使用JavaScript调用导出功能：
```javascript
// 直接转换并下载
window.MarkdownToWord.convert(markdownText, '文件名');

// 或创建导出按钮
const button = window.MarkdownToWord.createButton(container, markdownText, '文件名');
```

更多详细信息，请参考 `markdown-to-word-readme.md` 文件或查看 `markdown-to-word-demo.html` 演示页面。

## 🔮 未来拓展

以下是一些可能的功能拓展：

* 对话历史的导出功能
* 更丰富的UI主题和自定义选项
* 图像生成和处理功能
* 支持更多AI服务提供商
* 对话内容分析和总结
* 多语言支持
* 响应式设计优化
* 移动端应用开发
* 智能体配置云端同步
* 配置导入导出功能

---

希望这个平台能帮助您高效办公和学习！如有问题或建议，欢迎随时提出。
